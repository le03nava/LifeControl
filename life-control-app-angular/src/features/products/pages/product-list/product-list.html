<div class="user-list-page">
  <header class="page-header">
    <div class="header-content">
      <h1 class="page-title">Products Management</h1>
      <p class="page-subtitle">Manage system users and their permissions</p>
    </div>
    <div class="header-actions">
      <button app-button variant="primary" routerLink="/products/create">âž• Add Product</button>
    </div>
  </header>

  <div class="filters-section">
    <div class="role-filter"></div>
  </div>

  <div class="users-grid">
    @defer (on viewport) {
      @for (product of products(); track product.id) {
        <app-products-card
          [product]="product"
          (editProduct)="editProduct($event)"
          (deleteProduct)="confirmDelete($event)"
        />
      } @empty {
        <div class="empty-state">
          <div class="empty-icon">ðŸ‘¥</div>
          <h3 class="empty-title">No users found</h3>
        </div>
      }
    } @placeholder {
      <div class="loading-skeleton">
        <div class="skeleton-card"></div>
        <div class="skeleton-card"></div>
        <div class="skeleton-card"></div>
      </div>
    }
  </div>

  <!-- Delete Confirmation Modal -->
  <app-modal
    [isOpen]="showDeleteModal()"
    title="Confirm Deletion"
    size="small"
    (modalClose)="cancelDelete()"
  >
    <p>
      Are you sure you want to delete <strong>{{ productToDelete()?.name }}</strong
      >?
    </p>
    <p class="warning-text">This action cannot be undone.</p>

    <div slot="footer">
      <button app-button variant="secondary" (buttonClick)="cancelDelete()">Cancel</button>
      <button app-button variant="danger" (buttonClick)="executeDelete()" [disabled]="isDeleting()">
        @if (isDeleting()) {
          Deleting...
        } @else {
          Delete User
        }
      </button>
    </div>
  </app-modal>
</div>
