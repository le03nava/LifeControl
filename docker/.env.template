# ============================================
# LifeControl - Environment Variables Template
# ============================================
# COPIAR ESTE ARCHIVO A .env Y COMPLETAR LOS VALORES
# cp .env.template .env
# cp .env.secrets.template .env.secrets
# ============================================

# ============================================
# ENVIRONMENT CONFIGURATION
# ============================================
COMPOSE_PROJECT_NAME=lifecontrol
ENVIRONMENT=development
SPRING_PROFILES_ACTIVE=dev

# ============================================
# PORTS - Development Base Ports (27000 range)
# ============================================
MONGO_PORT=27017
MYSQL_PORT=3307
POSTGRES_PORT=5433
ZOOKEEPER_PORT=2181
KAFKA_PORT=9092
KAFKA_INTERNAL_PORT=29092
SCHEMA_REGISTRY_PORT=8085
KAFKA_UI_PORT=8086
KEYCLOAK_PORT=8181
API_GATEWAY_PORT=9000
LOKI_PORT=3100
PROMETHEUS_PORT=9090
TEMPO_PORT=3110
TEMPO_ZIPKIN_PORT=9411
GRAFANA_PORT=3000

# ============================================
# DATABASE CREDENTIALS - DEVELOPMENT
# ============================================
MONGO_ROOT_USERNAME=root
MONGO_ROOT_PASSWORD=dev_password_123
MONGO_DATABASE=product-service

MYSQL_ROOT_PASSWORD=dev_mysql_123
MYSQL_DATABASE=order-service
MYSQL_USER=orderuser
MYSQL_PASSWORD=dev_order_password_123

KEYCLOAK_POSTGRES_DB=keycloak
KEYCLOAK_POSTGRES_USER=keycloak
KEYCLOAK_POSTGRES_PASSWORD=dev_keycloak_postgres_123

# ============================================
# KEYCLOAK CONFIGURATION
# ============================================
KC_DB=postgres
KC_DB_URL=jdbc:postgresql://keycloak-postgres/keycloak
KC_DB_USERNAME=keycloak
KC_DB_PASSWORD=dev_keycloak_postgres_123
KC_HOSTNAME=localhost
KC_HTTP_PORT=8080
KC_ADMIN_USERNAME=admin
KC_ADMIN_PASSWORD=dev_admin_123

# ============================================
# DOCKER IMAGES - Versions
# ============================================
MONGO_IMAGE=mongo:7.0.5
MYSQL_IMAGE=mysql:8.3.0
POSTGRES_IMAGE=postgres:18.1

ZOOKEEPER_IMAGE=confluentinc/cp-zookeeper:7.5.0
KAFKA_IMAGE=confluentinc/cp-kafka:7.5.0
SCHEMA_REGISTRY_IMAGE=confluentinc/cp-schema-registry:7.5.0
KAFKA_UI_IMAGE=kafbat/kafka-ui:latest

KEYCLOAK_IMAGE=quay.io/keycloak/keycloak:26.2.1
LOKI_IMAGE=grafana/loki:2.9.0
PROMETHEUS_IMAGE=prom/prometheus:v2.48.0
GRAFANA_IMAGE=grafana/grafana:10.2.0
TEMPO_IMAGE=grafana/tempo:2.3.0

# ============================================
# KAFKA CONFIGURATION
# ============================================
KAFKA_BROKER_ID=1
KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT
KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://broker:29092,PLAINTEXT_HOST://localhost:9092
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
KAFKA_TRANSACTION_STATE_LOG_MIN_ISR=1
KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR=1

SCHEMA_REGISTRY_HOST_NAME=schema-registry
SCHEMA_REGISTRY_KAFKASTORE_BOOTSTRAP_SERVERS=broker:29092
SCHEMA_REGISTRY_LISTENERS=http://schema-registry:8081

KAFKA_CLUSTERS_NAME=local
KAFKA_CLUSTERS_BOOTSTRAPSERVERS=broker:29092

# ============================================
# API GATEWAY CONFIGURATION
# ============================================
API_GATEWAY_SERVER_PORT=9000
API_GATEWAY_MANAGEMENT_PORT=9001
KEYCLOAK_ISSUER_URI=http://localhost:8181/realms/life-control-realm

# Circuit Breaker
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=30
CIRCUIT_BREAKER_WINDOW_SIZE=5
TIMEOUT_DURATION=2s
RETRY_MAX_ATTEMPTS=2

# Logging
LOG_LEVEL=DEBUG
TRACING_ENABLED=true
TRACING_SAMPLING_PROBABILITY=0.5

# ============================================
# MONITORING CONFIGURATION
# ============================================
PROMETHEUS_ENABLED=true
LOKI_URL=http://loki:3100/loki/api/v1/push

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=15s
HEALTH_CHECK_TIMEOUT=2s
HEALTH_CHECK_START_PERIOD=30s
HEALTH_CHECK_RETRIES=2

# ============================================
# GRAFANA CONFIGURATION
# ============================================
GF_AUTH_ANONYMOUS_ENABLED=true
GF_AUTH_ANONYMOUS_ORG_ROLE=Admin
GF_AUTH_DISABLE_LOGIN_FORM=true

# ============================================
# VOLUMES PATHS - Standardized Structure
# ============================================
VOLUMES_BASE_PATH=./docker
MONGO_DATA_PATH=./docker/mongodb/volumes/data
MYSQL_DATA_PATH=./docker/mysql/volumes/data
POSTGRES_DATA_PATH=./docker/postgres/volumes/data
KEYCLOAK_REALMS_PATH=./docker/keycloak/volumes/realms
PROMETHEUS_DATA_PATH=./docker/prometheus/volumes/data
PROMETHEUS_CONFIG_PATH=./docker/prometheus/volumes/config
TEMPO_DATA_PATH=./docker/tempo/volumes/data
TEMPO_CONFIG_PATH=./docker/tempo/volumes/config
GRAFANA_DATA_PATH=./docker/grafana/volumes/data
GRAFANA_CONFIG_PATH=./docker/grafana/volumes/config
LOKI_DATA_PATH=./docker/loki/volumes/data
LOKI_CONFIG_PATH=./docker/loki/volumes/config
KAFKA_DATA_PATH=./docker/kafka/volumes/data
MYSQL_INIT_PATH=./docker/mysql/volumes/init

# ============================================
# RESOURCE LIMITS - Development
# ============================================
MONGO_MEMORY_LIMIT=512m
MYSQL_MEMORY_LIMIT=512m
POSTGRES_MEMORY_LIMIT=512m
KAFKA_MEMORY_LIMIT=1g
KEYCLOAK_MEMORY_LIMIT=1g
API_GATEWAY_MEMORY_LIMIT=512m
PROMETHEUS_MEMORY_LIMIT=512m
GRAFANA_MEMORY_LIMIT=256m
TEMPO_MEMORY_LIMIT=512m
LOKI_MEMORY_LIMIT=256m

# ============================================
# NETWORK CONFIGURATION
# ============================================
NETWORK_NAME=lifecontrol-network
NETWORK_DRIVER=bridge
